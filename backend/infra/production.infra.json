{
  "$schema": "https://encore.dev/schemas/infra.schema.json",
  "metadata": {
    "app_id": "mediavault",
    "env_name": "production",
    "env_type": "production",
    "cloud": "custom"
  },

  "sql_servers": [
    {
      "host": {"$env": "POSTGRES_HOST"}
    }
  ],

  "sql_databases": {
    "auth": {
      "server_id": 0,
      "database": "mediavault_auth",
      "username": {"$env": "POSTGRES_USER"},
      "password": {"$env": "POSTGRES_PASSWORD"}
    },
    "media": {
      "server_id": 0,
      "database": "mediavault_media",
      "username": {"$env": "POSTGRES_USER"},
      "password": {"$env": "POSTGRES_PASSWORD"}
    },
    "collection": {
      "server_id": 0,
      "database": "mediavault_collection",
      "username": {"$env": "POSTGRES_USER"},
      "password": {"$env": "POSTGRES_PASSWORD"}
    },
    "processing": {
      "server_id": 0,
      "database": "mediavault_processing",
      "username": {"$env": "POSTGRES_USER"},
      "password": {"$env": "POSTGRES_PASSWORD"}
    }
  },

  "pubsub": [
    {
      "type": "nsq",
      "hosts": {"$env": "NSQ_HOSTS"}
    }
  ],

  "pubsub_topics": {
    "media-uploaded": {
      "provider_id": 0,
      "subscriptions": {
        "processing-worker": {}
      }
    }
  },

  "secrets": {
    "DiscordClientID": {"$env": "DISCORD_CLIENT_ID"},
    "DiscordClientSecret": {"$env": "DISCORD_CLIENT_SECRET"},
    "SessionSecret": {"$env": "SESSION_SECRET"}
  }
}
