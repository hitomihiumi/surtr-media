{
  "$schema": "https://encore.dev/schemas/infra.schema.json",
  "metadata": {
    "app_id": "mediavault",
    "env_name": "local",
    "env_type": "development",
    "cloud": "custom"
  },

  "sql_servers": [
    {
      "host": "localhost:5432"
    }
  ],

  "sql_databases": {
    "auth": {
      "server_id": 0,
      "database": "mediavault_auth",
      "username": "postgres",
      "password": {"$env": "POSTGRES_PASSWORD"}
    },
    "media": {
      "server_id": 0,
      "database": "mediavault_media",
      "username": "postgres",
      "password": {"$env": "POSTGRES_PASSWORD"}
    },
    "collection": {
      "server_id": 0,
      "database": "mediavault_collection",
      "username": "postgres",
      "password": {"$env": "POSTGRES_PASSWORD"}
    },
    "processing": {
      "server_id": 0,
      "database": "mediavault_processing",
      "username": "postgres",
      "password": {"$env": "POSTGRES_PASSWORD"}
    }
  },

  "pubsub": [
    {
      "type": "nsq",
      "hosts": "localhost:4150"
    }
  ],

  "pubsub_topics": {
    "media-uploaded": {
      "provider_id": 0,
      "subscriptions": {
        "processing-worker": {}
      }
    }
  },

  "secrets": {
    "DiscordClientID": {"$env": "DISCORD_CLIENT_ID"},
    "DiscordClientSecret": {"$env": "DISCORD_CLIENT_SECRET"},
    "SessionSecret": {"$env": "SESSION_SECRET"}
  }
}
