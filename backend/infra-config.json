{
  "$schema": "https://encore.dev/schemas/infra.schema.json",
  "metadata": {
    "app_id": "mediavault",
    "env_name": "production",
    "env_type": "production",
    "cloud": "custom"
  },
  "sql_servers": [
    {
      "host": "postgres:5432",
      "databases": {
        "auth": {
          "name": "mediavault_auth",
          "username": "postgres",
          "password": {"$env": "POSTGRES_PASSWORD"}
        },
        "media": {
          "name": "mediavault_media",
          "username": "postgres",
          "password": {"$env": "POSTGRES_PASSWORD"}
        },
        "collection": {
          "name": "mediavault_collection",
          "username": "postgres",
          "password": {"$env": "POSTGRES_PASSWORD"}
        },
        "processing": {
          "name": "mediavault_processing",
          "username": "postgres",
          "password": {"$env": "POSTGRES_PASSWORD"}
        }
      }
    }
  ],
  "pubsub": [
    {
      "type": "nsq",
      "hosts": "nsqd:4150",
      "topics": {
        "media-uploaded": {
          "name": "media-uploaded",
          "subscriptions": {
            "processing-worker": {
              "name": "processing-worker"
            }
          }
        }
      }
    }
  ],
  "secrets": {
    "DiscordClientID": {"$env": "DISCORD_CLIENT_ID"},
    "DiscordClientSecret": {"$env": "DISCORD_CLIENT_SECRET"},
    "SessionSecret": {"$env": "SESSION_SECRET"}
  }
}
